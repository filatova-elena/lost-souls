---
layout: base
---
<!-- Debug: {{ refs | json }} -->
<main>
  <header>
    <h1>{{ refs.instructions.title }}</h1>
    <p class="italic">{{ refs.instructions.subtitle }}</p>
  </header>

  <section class="introduction">
  <h2>{{ refs.instructions.introduction.heading }}</h2>
  <p class="muted">{{ refs.instructions.introduction.location }}</p>
  
  <div>
    {{ refs.instructions.introduction.content | markdown | safe }}
  </div>
  
  <div class="call-to-action">
    <p><strong>{{ refs.instructions.call_to_action.main }}</strong></p>
    <p class="muted">{{ refs.instructions.call_to_action.subtext }}</p>
  </div>
</section>

<section class="how-to-play">
  <h2>ðŸŽ­ How to Play</h2>
  <ul>
    {% for rule in refs.instructions.rules %}
    <li>{{ rule | markdown | safe }}</li>
    {% endfor %}
  </ul>
</section>

<section style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid var(--accent-gold);">
  <button id="reset-investigation-btn" class="button" style="background-color: var(--secondary-dark); border-color: var(--gold-dim); color: var(--gold-dim);">
    Reset Investigation
  </button>
  <p class="muted" style="margin-top: 10px; font-size: 0.9em;">This will clear all progress and start fresh</p>
</section>

<script>
(function() {
  function handleResetInvestigation(e) {
    if (confirm('Are you sure you want to reset your investigation? This will clear all progress, scanned clues, and your selected character.')) {
      if (window.resetInvestigation) {
        window.resetInvestigation();
        alert('Investigation reset! The page will reload.');
        window.location.reload();
      }
    }
  }
  
  function init() {
    const button = document.getElementById('reset-investigation-btn');
    if (button) {
      button.addEventListener('click', handleResetInvestigation);
    }
  }
  
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
})();
</script>
</main>